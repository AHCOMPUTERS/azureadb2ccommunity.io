<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.1 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Azure AD B2C</title>
<meta name="description" content="Want to become a pro in B2C? We are here to help ">


  <meta name="author" content="Azure AD B2C">


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Azure AD B2C">
<meta property="og:title" content="Azure AD B2C">
<meta property="og:url" content="http://localhost:4000/previous_wiki_backup/Customize-your-policy/">


  <meta property="og:description" content="Want to become a pro in B2C? We are here to help ">



  <meta property="og:image" content="http://localhost:4000/assets/images/site-logo.png">



  <meta name="twitter:site" content="@mmistakes">
  <meta name="twitter:title" content="Azure AD B2C">
  <meta name="twitter:description" content="Want to become a pro in B2C? We are here to help ">
  <meta name="twitter:url" content="http://localhost:4000/previous_wiki_backup/Customize-your-policy/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="http://localhost:4000/assets/images/site-logo.png">
    
  

  







  

  


<link rel="canonical" href="http://localhost:4000/previous_wiki_backup/Customize-your-policy/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Michael Rose",
      "url": "http://localhost:4000/",
      "sameAs": ["https://twitter.com/mmistakes","https://www.facebook.com/michaelrose"]
    
  }
</script>


  <meta name="google-site-verification" content="UQj93ERU9zgECodaaXgVpkjrFn9UrDMEzVamacSoQ8Y" />





<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Azure AD B2C Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--default">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/b2c-logo.png" alt=""></a>
        
        <a class="site-title" href="/">
          Azure AD B2C
          <span class="site-subtitle">Community</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/docs/what-is-azuread-b2c/">Quick-Start Guide</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      <p>In this module we will show you some examples how to customize a policy.</p>

<h2 id="customizing-and-localize-the-ux">Customizing and localize the UX</h2>
<h3 id="customize-the-ui-using-html-templates">Customize the UI using HTML templates</h3>
<p>With Azure AD B2C, you get nearly full control of the HTML and CSS content thatâ€™s presented to users. See this article how to use a <a href="https://docs.microsoft.com/en-us/azure/active-directory-b2c/active-directory-b2c-ui-customization-custom">custom HTML template</a></p>

<h3 id="adding-javascript-to-your-html-page">Adding JavaScript to your HTML page</h3>
<ol>
  <li>Set the <a href="https://docs.microsoft.com/en-us/azure/active-directory-b2c/page-contract">page contract</a>. Replace <strong>all</strong> of the content definitions (that defines in the base policy) with the respective page contract. See the table in this article</li>
  <li>In your relying party policies add the allow script element, and follow the guidance on how to use JavaScript. Read more <a href="https://docs.microsoft.com/en-us/azure/active-directory-b2c/javascript-samples#add-the-scriptexecution-element">here</a>.</li>
  <li>You can now embed JavaScript in the HTML page.</li>
</ol>

<h3 id="localization">Localization</h3>
<p>Language customization in Azure AD B2C allows your user flow to accommodate different languages to suit your customer needs. Microsoft provides the translations for 36 languages, but you can also provide your own translations for any language. Even if your experience is provided for only a single language, you can customize any text on the pages.</p>

<p>Localization includes two parts:</p>
<ol>
  <li>Localize the Azure AD B2C labels and claims. So, you can customize the each label on the screen, such as the continue button, or the display name of a claim. Read the <a href="https://docs.microsoft.com/en-us/azure/active-directory-b2c/localization">localize document</a> for more details.</li>
  <li>In some cases you may want to render different HTML content based on the current language. To do so, you need to pass the language Id to your HTML page.
    <ol>
      <li>Static HTML page - TBD</li>
      <li>Dynamic HTML page -TBD</li>
    </ol>
  </li>
</ol>

<h3 id="adding-or-removing-claims-from-the-page">Adding or removing claims from the page</h3>
<p>To add claims to the page, see the next section. 
To remove a claim - TBD</p>

<h2 id="extend-the-user-profile">Extend the user profile</h2>
<p>The starter pack policy comes with a set of claims (or attributes), such as display name, first name, last name and email address. You may want to extend the user profile and manage more information about the user. For example if you may like the user profile to contain following information: Country of residence, city name, preferred language etc.</p>

<p>To do so, you first need to declare the claim. If the claim is not a built-in one (such as <code class="language-plaintext highlighter-rouge">city</code>, <code class="language-plaintext highlighter-rouge">mobile</code>, and <code class="language-plaintext highlighter-rouge">title</code>), the name of the claim must start with <code class="language-plaintext highlighter-rouge">extension_</code>. Add the claim to each of the following technical profiles:</p>

<table>
  <thead>
    <tr>
      <th>Technical profile</th>
      <th>Action</th>
      <th>Element</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>AAD-UserReadUsingObjectId</td>
      <td>Read</td>
      <td>OutputClaim</td>
      <td>Read the data for local account</td>
    </tr>
    <tr>
      <td>AAD-UserReadUsingAlternativeSecurityId-NoError</td>
      <td>Read</td>
      <td>OutputClaim</td>
      <td>Read the data for social account</td>
    </tr>
    <tr>
      <td>LocalAccountSignUpWithLogonEmail</td>
      <td>Collect</td>
      <td>OutputClaim</td>
      <td>Collect the data from user during sign-up with local account</td>
    </tr>
    <tr>
      <td>SelfAsserted-Social</td>
      <td>Collect</td>
      <td>OutputClaim</td>
      <td>Collect the data from user during first time sign-in with social account</td>
    </tr>
    <tr>
      <td>SelfAsserted-ProfileUpdate</td>
      <td>Collect</td>
      <td>InputClaim and OutputClaim</td>
      <td>Collect the data from user during edit profile. In this technical profile you need to set the input claims as well, so Azure AD B2C will prefilled the claims and present them to the user.</td>
    </tr>
    <tr>
      <td>AAD-UserWriteUsingLogonEmail</td>
      <td>Write</td>
      <td>PersistedClaim</td>
      <td>Persist the data during sign-up with local account</td>
    </tr>
    <tr>
      <td>AAD-UserWriteUsingAlternativeSecurityId</td>
      <td>Write</td>
      <td>PersistedClaim</td>
      <td>Persist the data, during first time sign-in with social account</td>
    </tr>
    <tr>
      <td>AAD-UserWriteProfileUsingObjectId</td>
      <td>Write</td>
      <td>PersistedClaim</td>
      <td>Persist the data, during profile editing</td>
    </tr>
    <tr>
      <td>Relying party</td>
      <td>Return</td>
      <td>OutputClaim</td>
      <td>Set the claims to be return to your relying party application.</td>
    </tr>
  </tbody>
</table>

<h2 id="add-a-federated-external-identity-provider">Add a federated external identity provider</h2>
<p>You can configure Azure AD B2C to allow users to sign-in to your application with credentials from an external identity provider, such as Facebook, Microsoft account, Google, Twitter, or any identity provider that supports OAuth1, OAuth2, OpenID Connect, SAML, and Ws-Fed protocols.</p>

<p>On the sign-up or sign-in page, Azure AD B2C presents a list of external identity providers a user can choose to sign-in with. Once the user clicks on one of the external identity providers, the user is taken (redirected) to the selected identity to complete the sign-in. After the user has successfully signed-in, the user is returned back to Azure AD B2C. Azure AD B2C creates the new social account into the directory, or reads an existing external account profile from the directory and returns the id token to the application.</p>

<p><img src="/previous_wiki_backup/media/add-external-idp.png" alt="External IDP" /></p>

<p>Adding external identity providers to your policy varies based on the protocol used, whether itâ€™s OAuth1, OAuth2, OpenID Connect, SAML or WS-Fed. In most cases, this involves following steps:</p>
<ol>
  <li>Configure the identity provider. For example, for an OAuth2 identity provider, you need to create an application registration at the identity provider and set the return URI to Azure AD B2C endpoint.</li>
  <li>Get the corresponding data from the external identity provider. For example, when federating with an OAuth2 identity provider, you need access to the Application Id, and Application secret. You will use those values in the next step.</li>
  <li>Create an Azure AD B2C policy key to store the Application secret.</li>
  <li>Configure a claims provider. To federate with your external identity provider, you need to configure a new technical profile to represent your trust relationship with the identity provider.</li>
  <li>Configure the technical profile with the relevant data in respect to your external identity provider.</li>
  <li>Add the sign-in button and configure the action on click, which will point to the technical profile you added to you policy earlier.</li>
</ol>


      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <div align="center" style="margin: 1em 0;">
        <ins class="adsbygoogle"
             style="display:block; border-bottom: initial;"
             data-ad-client="ca-pub-7328585512091257"
             data-ad-slot="3049671934"
             data-ad-format="auto"></ins>
        </div>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="search-searchbar"></div>
  <div class="search-hits"></div></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://stackoverflow.com/questions/tagged/azure-ad-b2c" rel="nofollow noopener noreferrer"><i class="fab fa-stack-overflow" aria-hidden="true"></i> Stackoverflow</a></li>
        
      
        
          <li><a href="https://github.com/azure-ad-b2c" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://woodgrovegroceriesb2cdemo.azurewebsites.net/" rel="nofollow noopener noreferrer"><i class="fas fa-laptop" aria-hidden="true"></i> Demo Site</a></li>
        
      
        
          <li><a href="https://azure.microsoft.com/en-us/services/active-directory-b2c/" rel="nofollow noopener noreferrer"><i class="fab fa-microsoft" aria-hidden="true"></i> Offical docs</a></li>
        
      
        
          <li><a href="https://www.youtube.com/results?search_query=azure+ad+b2c" rel="nofollow noopener noreferrer"><i class="fab fa-youtube" aria-hidden="true"></i> YouTube</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Michael Rose. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>


<!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'QB6HVGBSBA',
  apiKey: '9d5014e5bbc77372547bce778dfa5663',
  indexName: 'minimal_mistakes',
  searchParameters: {
    restrictSearchableAttributes: [
      'title',
      'content'
    ]
  }
});

const hitTemplate = function(hit) {
  const url = hit.url;
  const title = hit._highlightResult.title.value;
  const content = hit._highlightResult.html.value;

  return `
    <div class="list__item">
      <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
        <h2 class="archive__item-title" itemprop="headline"><a href="${url}">${title}</a></h2>
        <div class="archive__item-excerpt" itemprop="description">${content}</div>
      </article>
    </div>
  `;
}

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '.search-searchbar',
    poweredBy: true,
    placeholder: 'Enter your search term...'
  })
);
search.addWidget(
  instantsearch.widgets.hits({
    container: '.search-hits',
    templates: {
      item: hitTemplate
    }
  })
);

// Starting the search
search.start();
</script>








  </body>
</html>